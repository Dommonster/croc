<!doctype html>
<html lang="ru">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
 <link rel="stylesheet" type="text/css" href="style.css">
 <link rel="stylesheet" type="text/css" href="time_style.css">
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <title>Выбор времени</title>
</head>
<body>

  <div class="select">
    <div id="logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/Coat_of_arms_of_Chelyabinsk_Oblast.svg" id="chel2">
      <h5 id="chel2_label">Министерство здравоохраниения Челябинской области</h5>
    </div>
    <div id="current_date_time_block2" class="now"></div>
    <h5 id="head">Выберите время</h5>
    <div id="rdate">
      <input type="date" class="form-control" id="date_picker" required>
    </div>
    <div class="ok">
    <button id="ok_btn" class="btn btn-online-successs" onclick="date()">Выбрать</button>
    </div>
    <div id="time" >
      <div id="txt">
        <h5 id="date_text" value="Выберите дату приема">Выберите дату приема</h5>
      </div>
      <!-- <div> -->

                <style type="text/css">
                  #doc{
                      display: none;}
                </style>
      <div id ="doc">
            <table class="table">
              <tbody id="body">
                <tr>
                  <th scope="row">Терапевт</th>
                  <fieldset id="group1">
                    <td><input type="radio" value="value1" name="group1" id="21"><big id="1">Время</big></td>
                    <td><input type="radio" value="value3" name="group1" id="22"><big id="2">Время</big></td>
                    <td><input type="radio" value="value2" name="group1" id="23"><big id="3">Время</big></td>
                  </fieldset>
                </tr>
                <tr>
                  <th scope="row">Окулист</th>
                  <fieldset id="group2">
                    <td><input type="radio" value="value1" name="group2" id="24"><big id="4">Время</big></td>
                    <td><input type="radio" value="value3" name="group2" id="25"><big id="5">Время</big></td>
                    <td><input type="radio" value="value2" name="group2" id="26"><big id="6">Время</big></td>
                  </fieldset>
                </tr>
                <tr>
                  <th scope="row">Невролог</th>
                  <fieldset id="group3">
                    <td><input type="radio" value="value1" name="group3" id="27"><big id="7">Время</big></td>
                    <td><input type="radio" value="value3" name="group3" id="28"><big id="8">Время</big></td>
                    <td><input type="radio" value="value2" name="group3" id="29"><big id="9">Время</big></td>
                  </fieldset>
                </tr>
                <tr>
                  <th scope="row">Лор</th>
                  <fieldset id="group4">
                    <td><input type="radio" value="value1" name="group4" id="30"><big id="10">Время</big></td>
                    <td><input type="radio" value="value3" name="group4" id="31"><big id="11">Время</big></td>
                    <td><input type="radio" value="value2" name="group4" id="32"><big id="12">Время</big></td>
                  </fieldset>
                </tr>
              </tbody>
            </table>






    </div>
  </div>
    <div id="zapis_btn">
    <button id="button" type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" onclick="chek()">Записаться</button>

<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle" style="margin-left: auto; margin-right: auto;">Талон на мед. осмотр</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="background-color: red; opacity: 0;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table>
          <tr>
            <th scope="row" >Терапевт</th>
                  <fieldset id="group4">
                    <td><big id="100" ></big></td>
                    <td><big id="41" value="1">Время не выбрано</big></td>
                  </fieldset>
          </tr>
          <tr>
            <th scope="row" >Окулист</th>
                  <fieldset id="group4">
                    <td><big id="100" ></big></td>
                    <td><big id="42" value="1">Время не выбрано</big></td>
                  </fieldset>
          </tr>
          <tr>
            <th scope="row" >Невролог</th>
                  <fieldset id="group4">
                    <td><big id="100" ></big></td>
                    <td><big id="43" value="1">Время не выбрано</big></td>
                  </fieldset>
          </tr>
          <tr>
            <th scope="row" >Лор</th>
                  <fieldset id="group4">
                    <td><big id="100" ></big></td>
                    <td><big id="44" value="1">Время не выбрано</big></td>
                  </fieldset>
            
          </tr>
          <tr>
            <td style="color: white">Лор</td>
            <td style="color: white">Не выбрано</td>
          </tr>
        </table>
      </div>
      <div class="modal-footer" style="margin-left: auto; margin-right: auto;">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Изменить</button>
        <button type="button" class="btn btn-primary" id="talon">Распечатать талон</button>
      </div>
    </div>
  </div>
</div>

  </div>
  <script >
  function date(){
    var i=1;
    var text="juj";
    var costil;
    var rand =Array(2)
    var hour = [ 8,  9,  10,  11,  12,  13,  14,  15,  16,  17]; //массив
    var minut = ['00' , '15' , '30' , '45' ]; //массив
    let date = document.getElementById('date_picker');
    let time = document.getElementById('doc');
    if (date_picker.value!="") {
      time.style.display='block';
      document.getElementById('date_text').innerHTML = ('Свободное время на ' + date_picker.value);
    }
    else {alert('Выберите дату')};

    for (let i = 1; i < 13; i++) {
        console.log(i)
        rand[0] = ~~(Math.random()*hour.length);
        rand[1] = ~~(Math.random()*hour.length);
        rand[2] = ~~(Math.random()*hour.length);
        console.log(rand[0],rand[1],rand[2])
        if (rand[0]>rand[1]) {
          costil=rand[1]
          rand[1]=rand[0]
          rand[0]=costil
        }
        if (rand[1]>rand[2]) {
          costil=rand[2]
          rand[2]=rand[1]
          rand[1]=costil
        }
         if (rand[0]>rand[1]) {
          costil=rand[1]
          rand[1]=rand[0]
          rand[0]=costil
        }
        console.log(rand[0],rand[1],rand[2])
      var rHour = hour[rand[0]];  
        document.getElementById(i).innerHTML = (rHour);
      var  rHour = hour[rand[1]];
        document.getElementById(i+1).innerHTML = (rHour);
      var rHour = hour[rand[2]];
        document.getElementById(i+2).innerHTML = (rHour);

      var randMinut = ~~(Math.random()*minut.length);
      var rMinut = minut[randMinut];
      text=document.getElementById(i).innerHTML
      document.getElementById(i).innerHTML = (" "+text + ":" + rMinut);
      document.getElementById(i+20).value = (" "+text + ":" + rMinut);
      console.log(document.getElementById(i).value);


      var randMinut = ~~(Math.random()*minut.length);
      var rMinut = minut[randMinut];
      text=document.getElementById(i+1).innerHTML
      document.getElementById(i+1).innerHTML = (" "+text + ":" + rMinut);
      document.getElementById(i+21).value = (" "+text + ":" + rMinut);
      console.log(document.getElementById(i+1).value);

      var randMinut = ~~(Math.random()*minut.length);
      var rMinut = minut[randMinut];
      text=document.getElementById(i+2).innerHTML
      document.getElementById(i+2).innerHTML = (" "+text + ":" + rMinut);
      document.getElementById(i+22).value = (" "+text + ":" + rMinut);
      console.log(document.getElementById(i+2).value);
        console.log(i)
        i=i+2;
      }
      
  }

  function chek(){
    let y=41;
    for (var j=21; j<33;j++) 
    {
      
      if (document.getElementById(j).checked) {
        document.getElementById(y).innerHTML = document.getElementById(j).value;
        y++;
      }
      
  }
  if (document.getElementById('41').innerHTML =="Время не выбрано" || document.getElementById('42').innerHTML =="Время не выбрано" || document.getElementById('43').innerHTML =="Время не выбрано" || document.getElementById('44').innerHTML =="Время не выбрано") { alert("Вы не выбрали время для всех врачей");
      document.getElementById('talon').disabled=true;

      }
  
      else {
      
      
    }
}
  
</script>
<script  type="text/javascript">

  /* функция добавления ведущих нулей */
  /* (если число меньше десяти, перед числом добавляем ноль) */
  function zero_first_format(value)
  {
    if (value < 10)
    {
      value='0'+value;
    }
    return value;
  }

  /* функция получения текущей даты и времени */
  function date_time()
  {
    var current_datetime = new Date();
    var day = zero_first_format(current_datetime.getDate());
    var month = zero_first_format(current_datetime.getMonth()+1);
    var year = current_datetime.getFullYear();
    var hours = zero_first_format(current_datetime.getHours());
    var minutes = zero_first_format(current_datetime.getMinutes());
    var seconds = zero_first_format(current_datetime.getSeconds());

    return day+"."+month+"."+year+" "+hours+":"+minutes+":"+seconds;
  }


function test(){
  let j=21;
  let y=41;
  if (document.getElementById(j).checked) {
        document.getElementById(y).innerHTML =( document.getElementById(j).value);
        y++;
      }
      console.log(document.getElementById(j).value+" "+y)
}

  /* выводим текущую дату и время на сайт в блок с id "current_date_time_block" */
  document.getElementById('current_date_time_block2').innerHTML = date_time();
</script>


<script type="text/javascript">

  /* каждую секунду получаем текущую дату и время */
  /* и вставляем значение в блок с id "current_date_time_block2" */
  setInterval(function () {
    document.getElementById('current_date_time_block2').innerHTML = date_time();
  }, 1000);
</script>

</body>
</html>